<!DOCTYPE html>
<!-- 
Template Name: Metronic - Responsive Admin Dashboard Template build with Twitter Bootstrap 3.3.6
Version: 4.5.5
Author: KeenThemes
Website: http://www.keenthemes.com/
Contact: support@keenthemes.com
Follow: www.twitter.com/keenthemes
Dribbble: www.dribbble.com/keenthemes
Like: www.facebook.com/keenthemes
Purchase: http://themeforest.net/item/metronic-responsive-admin-dashboard-template/4021469?ref=keenthemes
License: You must have a valid license purchased only from themeforest(the above link) in order to legally use the theme for your project.
-->
<!--[if IE 8]> <html lang="en" class="ie8 no-js"> <![endif]-->
<!--[if IE 9]> <html lang="en" class="ie9 no-js"> <![endif]-->
<!--[if !IE]><!-->
<html lang="en">
<!--<![endif]-->
<!-- BEGIN HEAD -->

<head>
<meta charset="utf-8" />
<title>东丽装柜系统</title>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta content="width=device-width, initial-scale=1" name="viewport" />
<meta content="" name="description" />
<meta content="" name="author" />
<!-- BEGIN GLOBAL MANDATORY STYLES -->
<#include "/admin_sys/head.html"/>

</head>
<!-- END HEAD -->

<body
	class="page-header-fixed page-sidebar-closed-hide-logo page-container-bg-solid page-md">
	<!-- BEGIN HEADER -->
	<#include "/admin_sys/top.html"/>
	<!-- END HEADER -->
	<!-- BEGIN HEADER & CONTENT DIVIDER -->
	<div class="clearfix"></div>
	<!-- END HEADER & CONTENT DIVIDER -->
	<!-- BEGIN CONTAINER -->
	<div class="page-container">
		<!-- BEGIN SIDEBAR -->
		<#assign tb_14=true />
		<#assign tb_14_ul=true  />
		<#assign tb_14_li_1=true />
		<#assign tb_14_arrow=true />
		<#include "/admin_sys/left.html"/>
		<!-- END SIDEBAR -->
		<div class="page-content-wrapper">
			<!-- BEGIN CONTENT BODY -->
			<div style="min-height:1022px" class="page-content">
				<!-- page bar start -->
				<div class="page-bar">

					<ul class="page-breadcrumb">
						<li><a href="v_list.do">数据库备份</a> <i class="fa fa-angle-right"></i>
						</li>
						<li><span>进度</span></li>
					</ul>
				</div>



				<div class="row">
					<div class="col-md-12">
						<div class="portlet box blue">
							<div class="portlet-title">
								<div class="caption">
									<i class="fa fa-gift"></i>备份中
								</div>
							</div>
							<div class="portlet-body form" style="display: block;">

								<!-- BEGIN FORM-->
								<form action="o_upload.do" enctype="multipart/form-data"
									method="post" id="form_sample_1" novalidate="novalidate"
									class="form-horizontal form-row-seperated">
									<div class="form-body">

									<div class="alert alert-danger " id="progressContainer" name="progressContainer">
											<button class="close" data-close="alert"></button>
											备份中
										</div>
										
										<div class="form-group">
											<label class="control-label col-md-3" >进度：</label>
											<div id="animated-progress-bar" class="col-md-7">
												<div class="progress" style="height:30px">
													<div style="width: 0%" id="pregrossBar" name="pregrossBar"
														aria-valuemax="100" aria-valuemin="0" role="progressbar"
														class="progress-bar progress-bar-striped active">
														<span class="sr-only"></span>
													</div>
												</div>
											</div>
										
										<div class="form-actions">
										<div class="row">
											<div class="col-md-offset-5 col-md-5">
												<a href="v_list.do"  class="btn red btn-outline"> 返回列表 </a>
                                   			 <a href="${base}/admin/index.do" class="btn blue btn-outline"> 去首页 </a>
											</div>
										</div>
									</div>
										
										  
										</div>


									</div>
								</form>
								<!-- END FORM-->
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<!-- BEGIN CONTENT -->

		<#include "/common/bootAlert_message.html"/>
		<!-- END CONTENT -->

		<script type="text/javascript">
var interCall;
function createProgress() {
	$.post("o_backup_progress.do",{},function(data){
		if(data.progress!=""){
			$("#progressContainer").html(data.progress);
			$("#pregrossBar").width(data.per +'%');
		}else{
			$("#pregrossBar").width(data.per +'%');
				$("#pregrossBar").removeClass("active");
			if(data.per==100){
				 bootbox.alert("备份完成<a href='v_list.do' class='pn-opt'>回到列表</a>"); 
			}
			$("#progressContainer").html("备份完成<a href='v_list.do' class='pn-opt'>回到列表</a>");
			if(data.error!=null){
				$("#progressContainer").html(data.error);
				 bootbox.alert(data.error+"备份失败<a href='v_list.do' class='pn-opt'>回到列表</a>"); 
		}
			window.clearInterval(interCall);
		}
	},"json");
}
$(function() {

	createProgress();
});
interCall=window.setInterval("createProgress()",1000);
</script>
	</div>
	<!-- END CONTAINER -->
</body>

</html>